<script>
const PRESALE_ADDRESS = "0x54459e1D8E931053C847412F22b69040C143b4fe";

async function buy() {
  if (typeof window.ethereum === "undefined") {
    alert("MetaMask not detected");
    return;
  }

  try {
    // طلب الاتصال بالمحفظة
    const accounts = await window.ethereum.request({
      method: "eth_requestAccounts",
    });

    const amount = document.getElementById("bnbAmount").value;
    if (!amount  amount < 0.1  amount > 2) {
      alert("Enter amount between 0.1 and 2 BNB");
      return;
    }

    const valueInWei = BigInt(Math.floor(amount * 1e18)).toString();

    // إرسال المعاملة
    await window.ethereum.request({
      method: "eth_sendTransaction",
      params: [
        {
          from: accounts[0],
          to: PRESALE_ADDRESS,
          value: "0x" + BigInt(valueInWei).toString(16),
        },
      ],
    });

    document.getElementById("status").innerText =
      "Transaction sent. Check MetaMask.";
  } catch (err) {
    console.error(err);
    alert("Transaction cancelled or failed");
  }
}
</script>
